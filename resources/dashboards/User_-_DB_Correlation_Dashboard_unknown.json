{
  "id": "unknown",
  "name": "User - DB Correlation Dashboard",
  "exported_at": "2025-12-19T08:57:28.972000",
  "data": {
    "id": "9Y5te8i6nir7qLoasIaWy",
    "name": "User - DB Correlation Dashboard",
    "description": null,
    "layout": {
      "sections": [
        {
          "id": {
            "value": "13ff1dd6-1c40-490d-ac25-afd9a8e75d52"
          },
          "rows": [
            {
              "id": {
                "value": "1d6d0e4d-0987-4a8d-b20e-8ecf46c40b8a"
              },
              "appearance": {
                "height": 19
              },
              "widgets": [
                {
                  "id": {
                    "value": "0f549d76-9ded-4972-a1a8-ef89b3395415"
                  },
                  "title": "Front end Errors for DB Touching Users",
                  "description": null,
                  "definition": {
                    "gauge": {
                      "query": {
                        "dataprime": {
                          "dataprimeQuery": {
                            "text": "source spans \n| filter $d.tags['db.namespace'] != null\n| join (source logs | filter cx_rum != null | choose $d.cx_rum.session_context.user_name, cx_rum.traceId) on left=>$d.traceID == right=>cx_rum.traceId into rum_data\n| filter rum_data.cx_rum.traceId != null\n| filter $p.Users == null || rum_data.cx_rum.session_context.user_name.inArray($p.Users)\n| create user_db_interaction from concat(rum_data.cx_rum.session_context.user_name,'->',$d.tags['db.namespace'])\n| top 20 user_db_interaction by count_if($d.tags.error != null)"
                          },
                          "filters": [],
                          "timeFrame": null
                        }
                      },
                      "min": 0,
                      "max": 100,
                      "showInnerArc": false,
                      "showOuterArc": false,
                      "unit": "UNIT_CUSTOM",
                      "thresholds": [
                        {
                          "from": 0,
                          "color": "var(--c-severity-log-verbose)",
                          "label": "Low Error Volume"
                        },
                        {
                          "from": 10,
                          "color": "var(--c-severity-log-warning)",
                          "label": "Multiple Errors"
                        },
                        {
                          "from": 20,
                          "color": "var(--c-severity-log-error)",
                          "label": "High Error Volume"
                        }
                      ],
                      "dataModeType": "DATA_MODE_TYPE_HIGH_UNSPECIFIED",
                      "thresholdBy": "THRESHOLD_BY_BACKGROUND",
                      "customUnit": "Errors",
                      "decimal": 2,
                      "thresholdType": "THRESHOLD_TYPE_ABSOLUTE",
                      "legend": {
                        "isVisible": true,
                        "columns": [],
                        "groupByQuery": true,
                        "placement": "LEGEND_PLACEMENT_AUTO"
                      },
                      "legendBy": "LEGEND_BY_GROUPS",
                      "displaySeriesName": true,
                      "decimalPrecision": null
                    }
                  },
                  "appearance": null,
                  "createdAt": null,
                  "updatedAt": null
                }
              ]
            },
            {
              "id": {
                "value": "dd87dabf-b306-479a-9925-d266d7bc954e"
              },
              "appearance": {
                "height": 19
              },
              "widgets": [
                {
                  "id": {
                    "value": "72b45645-acbc-4303-b10d-cd71decf7646"
                  },
                  "title": "DB Clusters In Use by Request Volume",
                  "description": null,
                  "definition": {
                    "dataTable": {
                      "query": {
                        "dataprime": {
                          "dataprimeQuery": {
                            "text": "source spans \n| filter $d.tags['db.namespace'] != null\n| groupby $d.tags['db.namespace'] as $d['DB Cluster (ms)'] agg avg($m.duration) as $d['Average Query Duration (ms)'], max($m.duration) as $d['Max Query Duration (ms)'], min($m.duration) as $d['Min Query Duration (ms)']\n| filter !$d['DB Cluster (ms)'].startsWith('172')"
                          },
                          "filters": [],
                          "timeFrame": null
                        }
                      },
                      "resultsPerPage": 100,
                      "rowStyle": "ROW_STYLE_ONE_LINE",
                      "columns": [
                        {
                          "field": "$d.DB Cluster (ms)",
                          "width": 200
                        },
                        {
                          "field": "$d.Average Query Duration (ms)",
                          "width": 287
                        },
                        {
                          "field": "$d.Max Query Duration (ms)",
                          "width": 404
                        },
                        {
                          "field": "$d.Min Query Duration (ms)",
                          "width": 377
                        }
                      ],
                      "orderBy": null,
                      "dataModeType": "DATA_MODE_TYPE_HIGH_UNSPECIFIED"
                    }
                  },
                  "appearance": null,
                  "createdAt": null,
                  "updatedAt": null
                }
              ]
            }
          ],
          "options": {
            "custom": {
              "name": "User -> DB Error Mapping",
              "description": null,
              "collapsed": false,
              "color": {
                "predefined": "SECTION_PREDEFINED_COLOR_UNSPECIFIED"
              },
              "repetitiveVar": null
            }
          }
        },
        {
          "id": {
            "value": "f298ec38-d9a7-4382-8594-7e8588a62949"
          },
          "rows": [
            {
              "id": {
                "value": "d2eed5a1-9937-4112-b95d-a220287eb605"
              },
              "appearance": {
                "height": 35
              },
              "widgets": [
                {
                  "id": {
                    "value": "fc88a308-9ad6-40c7-9dfa-00edb16b9205"
                  },
                  "title": "Front end user -> Database Interactions",
                  "description": null,
                  "definition": {
                    "dataTable": {
                      "query": {
                        "dataprime": {
                          "dataprimeQuery": {
                            "text": "source spans \n| filter $d.tags['db.namespace'] != null\n| join (source logs | filter cx_rum != null | choose $d.cx_rum.session_context.user_name, cx_rum.traceId) on left=>$d.traceID == right=>cx_rum.traceId into rum_data\n| filter rum_data.cx_rum.traceId != null\n| filter $p.Users == null || rum_data.cx_rum.session_context.user_name.inArray($p.Users)\n| choose $d.rum_data.cx_rum.session_context.user_name as user, $d.tags['db.namespace'] as table, if($d.tags['db.statement'] != null,$d.tags['db.statement'], 'Non-Query Transaction')  as statement, if($d.tags.error:string == 'true', 'true', 'false') as is_err"
                          },
                          "filters": [],
                          "timeFrame": null
                        }
                      },
                      "resultsPerPage": 100,
                      "rowStyle": "ROW_STYLE_ONE_LINE",
                      "columns": [
                        {
                          "field": "$d.user",
                          "width": 124
                        },
                        {
                          "field": "$d.table",
                          "width": 138
                        },
                        {
                          "field": "$d.statement",
                          "width": 210
                        }
                      ],
                      "orderBy": null,
                      "dataModeType": "DATA_MODE_TYPE_HIGH_UNSPECIFIED"
                    }
                  },
                  "appearance": null,
                  "createdAt": null,
                  "updatedAt": null
                },
                {
                  "id": {
                    "value": "921e6a76-b625-4f61-bf1a-d894973f4bef"
                  },
                  "title": "DB Clusters In Use by Request Volume",
                  "description": null,
                  "definition": {
                    "pieChart": {
                      "query": {
                        "dataprime": {
                          "dataprimeQuery": {
                            "text": "source spans \n| filter $d.tags['db.namespace'] != null\n| join (source logs | filter cx_rum != null | choose $d.cx_rum.session_context.user_name, cx_rum.traceId) on left=>$d.traceID == right=>cx_rum.traceId into rum_data\n| filter rum_data.cx_rum.traceId != null\n| filter $p.Users == null || rum_data.cx_rum.session_context.user_name.inArray($p.Users)\n| filter $d.tags.error != null\n| countby $d.tags['db.namespace'] as count"
                          },
                          "filters": [],
                          "groupNames": [
                            "count"
                          ],
                          "stackedGroupName": null,
                          "timeFrame": null
                        }
                      },
                      "maxSlicesPerChart": 8,
                      "minSlicePercentage": 1,
                      "stackDefinition": {
                        "maxSlicesPerStack": 4,
                        "stackNameTemplate": null
                      },
                      "labelDefinition": {
                        "labelSource": "LABEL_SOURCE_INNER",
                        "isVisible": true,
                        "showName": true,
                        "showValue": true,
                        "showPercentage": true
                      },
                      "showLegend": true,
                      "groupNameTemplate": null,
                      "unit": "UNIT_UNSPECIFIED",
                      "colorScheme": "classic",
                      "dataModeType": "DATA_MODE_TYPE_HIGH_UNSPECIFIED",
                      "customUnit": "",
                      "decimal": null,
                      "legend": {
                        "isVisible": true,
                        "columns": [],
                        "groupByQuery": true,
                        "placement": "LEGEND_PLACEMENT_AUTO"
                      },
                      "hashColors": false,
                      "decimalPrecision": null,
                      "showTotal": null
                    }
                  },
                  "appearance": null,
                  "createdAt": null,
                  "updatedAt": null
                },
                {
                  "id": {
                    "value": "931cda85-2b7b-45ae-82d3-b40e7a3eb273"
                  },
                  "title": "User -> Database Activity",
                  "description": null,
                  "definition": {
                    "lineChart": {
                      "legend": {
                        "isVisible": true,
                        "columns": [],
                        "groupByQuery": false,
                        "placement": "LEGEND_PLACEMENT_AUTO"
                      },
                      "tooltip": {
                        "showLabels": false,
                        "type": "TOOLTIP_TYPE_ALL"
                      },
                      "queryDefinitions": [
                        {
                          "id": "42b9f222-8b51-4701-8443-5d24ac5bd208",
                          "query": {
                            "dataprime": {
                              "dataprimeQuery": {
                                "text": "source spans \n| filter $d.tags['db.namespace'] != null\n| join (source logs | filter cx_rum != null | choose $d.cx_rum.session_context.user_name, cx_rum.traceId) on left=>$d.traceID == right=>cx_rum.traceId into rum_data\n| filter rum_data.cx_rum.traceId != null\n| filter $p.Users == null || rum_data.cx_rum.session_context.user_name.inArray($p.Users)\n| groupby $m.timestamp / 1m if(count() > 0, count(), 0) as $d['User Queries to DB']"
                              },
                              "filters": [],
                              "timeFrame": null
                            }
                          },
                          "seriesNameTemplate": null,
                          "seriesCountLimit": "20",
                          "unit": "UNIT_UNSPECIFIED",
                          "scaleType": "SCALE_TYPE_LINEAR",
                          "name": "Query",
                          "isVisible": true,
                          "colorScheme": "classic",
                          "resolution": null,
                          "dataModeType": "DATA_MODE_TYPE_HIGH_UNSPECIFIED",
                          "customUnit": "",
                          "decimal": 2,
                          "hashColors": false,
                          "yAxisMin": null,
                          "yAxisMax": null,
                          "decimalPrecision": null
                        },
                        {
                          "id": "49bb3b32-b28b-4c8d-974d-77d12d433e3d",
                          "query": {
                            "dataprime": {
                              "dataprimeQuery": {
                                "text": "source spans \n| filter $d.tags['db.namespace'] != null\n| join (source logs | filter cx_rum != null | choose $d.cx_rum.session_context.user_name, cx_rum.traceId) on left=>$d.traceID == right=>cx_rum.traceId into rum_data\n| filter rum_data.cx_rum.traceId != null\n| filter $p.Users == null || rum_data.cx_rum.session_context.user_name.inArray($p.Users)\n| filter $d.tags.error != null\n| groupby $m.timestamp / 1m if(count() > 0, count(), 0) as $d['User DB Errors']"
                              },
                              "filters": [],
                              "timeFrame": null
                            }
                          },
                          "seriesNameTemplate": null,
                          "seriesCountLimit": "20",
                          "unit": "UNIT_UNSPECIFIED",
                          "scaleType": "SCALE_TYPE_LINEAR",
                          "name": null,
                          "isVisible": true,
                          "colorScheme": "negative",
                          "resolution": null,
                          "dataModeType": "DATA_MODE_TYPE_HIGH_UNSPECIFIED",
                          "customUnit": "",
                          "decimal": 2,
                          "hashColors": false,
                          "yAxisMin": null,
                          "yAxisMax": null,
                          "decimalPrecision": null
                        }
                      ],
                      "stackedLine": "STACKED_LINE_ABSOLUTE",
                      "connectNulls": null
                    }
                  },
                  "appearance": null,
                  "createdAt": null,
                  "updatedAt": null
                }
              ]
            },
            {
              "id": {
                "value": "1dc82c24-4ecb-47e6-b7c2-769a1dfca887"
              },
              "appearance": {
                "height": 19
              },
              "widgets": [
                {
                  "id": {
                    "value": "e3602444-169f-4d94-a9a5-27382ac43a33"
                  },
                  "title": "Top Detected Queries",
                  "description": null,
                  "definition": {
                    "barChart": {
                      "query": {
                        "dataprime": {
                          "dataprimeQuery": {
                            "text": "source spans \n| filter $d.tags['db.namespace'] != null\n| join (source logs | filter cx_rum != null | choose $d.cx_rum.session_context.user_name, cx_rum.traceId) on left=>$d.traceID == right=>cx_rum.traceId into rum_data\n| filter rum_data.cx_rum.traceId != null\n| filter $p.Users == null || rum_data.cx_rum.session_context.user_name.inArray($p.Users)\n| filter $d.tags['db.statement'] != null\n| top 20 tags['db.statement'] as $d.db_statement by count()"
                          },
                          "filters": [],
                          "groupNames": [
                            "db_statement"
                          ],
                          "stackedGroupName": null,
                          "timeFrame": null
                        }
                      },
                      "maxBarsPerChart": 24,
                      "groupNameTemplate": null,
                      "stackDefinition": {
                        "maxSlicesPerBar": 7,
                        "stackNameTemplate": null
                      },
                      "scaleType": "SCALE_TYPE_LINEAR",
                      "colorsBy": {
                        "groupBy": {}
                      },
                      "xAxis": {
                        "value": {}
                      },
                      "unit": "UNIT_UNSPECIFIED",
                      "sortBy": "SORT_BY_TYPE_VALUE",
                      "colorScheme": "classic",
                      "dataModeType": "DATA_MODE_TYPE_HIGH_UNSPECIFIED",
                      "barValueDisplay": "BAR_VALUE_DISPLAY_TOP",
                      "customUnit": "",
                      "decimal": 2,
                      "legend": {
                        "isVisible": true,
                        "columns": [],
                        "groupByQuery": true,
                        "placement": "LEGEND_PLACEMENT_SIDE"
                      },
                      "hashColors": false,
                      "yAxisMin": null,
                      "yAxisMax": null,
                      "decimalPrecision": null
                    }
                  },
                  "appearance": null,
                  "createdAt": null,
                  "updatedAt": null
                },
                {
                  "id": {
                    "value": "90758398-4125-499b-b518-55e714abc93b"
                  },
                  "title": "DBMS Systems Used by Users",
                  "description": null,
                  "definition": {
                    "pieChart": {
                      "query": {
                        "dataprime": {
                          "dataprimeQuery": {
                            "text": "source spans \n| filter $d.tags['db.namespace'] != null\n| join (source logs | filter cx_rum != null | choose $d.cx_rum.session_context.user_name, cx_rum.traceId) on left=>$d.traceID == right=>cx_rum.traceId into rum_data\n| filter rum_data.cx_rum.traceId != null\n| filter $p.Users == null || rum_data.cx_rum.session_context.user_name.inArray($p.Users)\n| filter tags['db.system'] != null\n| top 20 $d.tags['db.system'] as db_system by count()"
                          },
                          "filters": [],
                          "groupNames": [
                            "db_system"
                          ],
                          "stackedGroupName": null,
                          "timeFrame": null
                        }
                      },
                      "maxSlicesPerChart": 8,
                      "minSlicePercentage": 1,
                      "stackDefinition": {
                        "maxSlicesPerStack": 4,
                        "stackNameTemplate": null
                      },
                      "labelDefinition": {
                        "labelSource": "LABEL_SOURCE_INNER",
                        "isVisible": true,
                        "showName": true,
                        "showValue": true,
                        "showPercentage": true
                      },
                      "showLegend": true,
                      "groupNameTemplate": null,
                      "unit": "UNIT_UNSPECIFIED",
                      "colorScheme": "classic",
                      "dataModeType": "DATA_MODE_TYPE_HIGH_UNSPECIFIED",
                      "customUnit": "",
                      "decimal": null,
                      "legend": {
                        "isVisible": true,
                        "columns": [],
                        "groupByQuery": true,
                        "placement": "LEGEND_PLACEMENT_AUTO"
                      },
                      "hashColors": false,
                      "decimalPrecision": null,
                      "showTotal": null
                    }
                  },
                  "appearance": null,
                  "createdAt": null,
                  "updatedAt": null
                }
              ]
            }
          ],
          "options": {
            "internal": {}
          }
        }
      ]
    },
    "variables": [
      {
        "name": "Users",
        "definition": {
          "multiSelect": {
            "selected": [],
            "source": {
              "query": {
                "query": {
                  "logsQuery": {
                    "type": {
                      "fieldValue": {
                        "observationField": {
                          "keypath": [
                            "cx_rum",
                            "session_context",
                            "user_name"
                          ],
                          "scope": "DATASET_SCOPE_USER_DATA"
                        }
                      }
                    }
                  }
                },
                "refreshStrategy": "REFRESH_STRATEGY_UNSPECIFIED",
                "valueDisplayOptions": {
                  "valueRegex": null,
                  "labelRegex": null
                }
              }
            },
            "selection": {
              "all": {}
            },
            "valuesOrderDirection": "ORDER_DIRECTION_ASC",
            "selectionOptions": {
              "selectionType": "SELECTION_TYPE_MULTI_ALL"
            }
          }
        },
        "displayName": "Users",
        "description": null,
        "displayType": "VARIABLE_DISPLAY_TYPE_UNSPECIFIED"
      },
      {
        "name": "DBNamespace",
        "definition": {
          "multiSelect": {
            "selected": [],
            "source": {
              "query": {
                "query": {
                  "spansQuery": {
                    "type": {
                      "fieldValue": {
                        "value": null,
                        "observationField": {
                          "keypath": [
                            "tags",
                            "db.namespace"
                          ],
                          "scope": "DATASET_SCOPE_USER_DATA"
                        }
                      }
                    }
                  }
                },
                "refreshStrategy": "REFRESH_STRATEGY_UNSPECIFIED",
                "valueDisplayOptions": {
                  "valueRegex": null,
                  "labelRegex": null
                }
              }
            },
            "selection": {
              "all": {}
            },
            "valuesOrderDirection": "ORDER_DIRECTION_ASC",
            "selectionOptions": {
              "selectionType": "SELECTION_TYPE_MULTI_ALL"
            }
          }
        },
        "displayName": "DB Namespace",
        "description": null,
        "displayType": "VARIABLE_DISPLAY_TYPE_UNSPECIFIED"
      }
    ],
    "filters": [],
    "relativeTimeFrame": "7200s",
    "folderId": null,
    "folderPath": null,
    "annotations": [],
    "off": {},
    "slugName": null,
    "variablesV2": [],
    "actions": []
  }
}